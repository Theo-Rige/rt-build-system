import{codeToHtml as t}from"https://esm.sh/shiki@3.5.0";class e{constructor(t){this.root=t,this.tabList=t.querySelector(".tabs-list"),this.tabs=Array.from(t.querySelectorAll(".tabs-trigger")),this.panels=Array.from(t.querySelectorAll(".tabs-panel")),this.indicator=this.tabList.querySelector(".tabs-indicator"),this.tabList.setAttribute("role","tablist"),this.tabs.forEach(((t,e)=>{t.setAttribute("role","tab"),t.setAttribute("tabindex",0===e?"0":"-1"),t.setAttribute("aria-selected",0===e?"true":"false");const r=this.panels[e];if(r){const a=t.id||`tab-${e}`,o=r.id||`tabpanel-${e}`;t.id=a,r.id=o,t.setAttribute("aria-controls",o),r.setAttribute("role","tabpanel"),r.setAttribute("aria-labelledby",a),r.hidden=0!==e}})),this.tabs.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.selectTab(t)}))})),this.updateIndicator(this.tabs[0])}selectTab(t){this.tabs.forEach((e=>{const r=e===t;e.setAttribute("aria-selected",r),e.tabIndex=r?0:-1})),this.panels.forEach((e=>{const r=t.getAttribute("aria-controls");e.hidden=e.id!==r})),this.updateIndicator(t)}updateIndicator(t){if(!this.indicator||!t)return;const e=t.getBoundingClientRect(),r=this.tabList.getBoundingClientRect();this.indicator.style.width=`${e.width}px`,this.indicator.style.left=e.left-r.left+"px"}}function r(t,e,r=2e3){t.classList.add(e),setTimeout((()=>{t.classList.remove(e)}),r)}async function a(){const t=document.querySelector(".grid--libraries");if(!t)return;t.querySelectorAll('a.grid__cell--link[href*="github.com"]').forEach((async e=>{const r=function(t){const e=t.match(/github\.com\/([^\/]+)\/([^\/]+)/);return e?`${e[1]}/${e[2]}`:null}(e.href),a=e.dataset.index;if(!r)return;const o=t.querySelector(`.grid__cell--date[data-index="${a}"]`),i=t.querySelector(`.grid__cell--status[data-index="${a}"]`);if(o&&i)try{const t=await async function(t){try{const e=await fetch(`https://api.github.com/repos/${t}/releases/latest`);if(e.ok){const t=await e.json();return t.published_at?new Date(t.published_at):null}}catch(t){console.error("Error fetching release data:",t)}return null}(r);t&&(o.textContent=t.toLocaleDateString(),async function(t,e){if(!e)return;const r=t.dataset.index,a=new FormData;a.append("action","rtbs_update_library_status"),a.append("_ajax_nonce",RTBS.nonce),a.append("id",RTBS.id),a.append("index",r),a.append("date",e.toISOString());const o=await fetch(RTBS.ajaxUrl,{method:"POST",body:a}),i=await o.json();i.success&&(t.innerHTML=i.data)}(i,t))}catch(t){console.error(`Failed to update library date for ${r}:`,t)}}))}document.addEventListener("DOMContentLoaded",(()=>{const o=document.getElementById("preview"),i=document.querySelector("#preview .rtbs-button--expand"),n=document.querySelector(".rtbs-button--copy"),s=document.querySelector(".rtbs-button--share"),c=document.getElementById("code");if(o&&i&&i.addEventListener("click",(()=>{o.removeAttribute("style"),o.classList.toggle("expanded")})),n&&n.addEventListener("click",(async()=>{const t=o.innerHTML,e=await fetch("https://api.to.design/html",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ..."},body:JSON.stringify({html:t,clip:!0})});if(e.ok){const t=await e.text();try{await navigator.clipboard.writeText(t),r(n,"copy--success")}catch(t){console.error("Failed to copy to clipboard:",t),r(n,"copy--error")}}else console.error("Failed to fetch clipboard data from API:",e.statusText),r(n,"copy--error")})),s&&s.addEventListener("click",(async()=>{try{await navigator.share({title:document.title,url:window.location.href})}catch(t){console.error("Failed to share:",t)}})),c){c.querySelectorAll(".tabs-panel").forEach((async e=>{const a=e.querySelector("code");if(!a)return;const o=e.querySelector(".copy"),i=e.querySelector(".code");try{const e=i.dataset.lang||"javascript",n=await t(a.textContent,{lang:e,theme:"dark-plus",colorReplacements:{"#1e1e1e":"#0f172b"}});i&&(i.innerHTML=n),o&&o.addEventListener("click",(async()=>{try{await navigator.clipboard.writeText(a.textContent),r(o,"copy--success")}catch(t){console.error("Failed to copy:",t),r(o,"copy--error")}}))}catch(t){console.error("Error processing code panel:",t)}})),new e(c)}a()}));
//# sourceMappingURL=component.min.js.map
