{"version":3,"file":"component.min.js","names":["codeToHtml","Tabs","constructor","root","this","tabList","querySelector","tabs","Array","from","querySelectorAll","panels","indicator","setAttribute","forEach","tab","index","panel","tabID","id","panelId","hidden","addEventListener","event","preventDefault","selectTab","updateIndicator","selectedTab","selected","tabIndex","getAttribute","tabRect","getBoundingClientRect","listRect","style","width","left","toggleButtonState","button","className","duration","classList","add","setTimeout","remove","async","updateLibraryDates","librariesGrid","document","link","repo","url","match","extractRepoFromUrl","href","dataset","dateCell","statusCell","releaseDate","response","fetch","ok","data","json","published_at","Date","error","console","fetchLatestReleaseDate","textContent","toLocaleDateString","FormData","append","RTBS","nonce","toISOString","updateLibraryStatusRequest","ajaxUrl","method","body","updateLibraryStatusResponse","success","innerHTML","updateLibraryStatus","preview","getElementById","previewExpandButton","copyDesignButton","shareButton","codeTabs","removeAttribute","toggle","componentHTML","headers","Authorization","JSON","stringify","html","clip","clipboardDataFromAPI","text","navigator","clipboard","writeText","statusText","share","title","window","location","code","copyButton","codeContainer","lang","formattedCode","theme","colorReplacements"],"sources":["component.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import { codeToHtml } from 'https://esm.sh/shiki@3.5.0'\r\n\r\nclass Tabs {\r\n\tconstructor(root) {\r\n\t\tthis.root = root\r\n\t\tthis.tabList = root.querySelector('.tabs-list')\r\n\t\tthis.tabs = Array.from(root.querySelectorAll('.tabs-trigger'))\r\n\t\tthis.panels = Array.from(root.querySelectorAll('.tabs-panel'))\r\n\t\tthis.indicator = this.tabList.querySelector('.tabs-indicator')\r\n\r\n\t\tthis.tabList.setAttribute('role', 'tablist')\r\n\r\n\t\tthis.tabs.forEach((tab, index) => {\r\n\t\t\ttab.setAttribute('role', 'tab')\r\n\t\t\ttab.setAttribute('tabindex', index === 0 ? '0' : '-1')\r\n\t\t\ttab.setAttribute('aria-selected', index === 0 ? 'true' : 'false')\r\n\r\n\t\t\tconst panel = this.panels[index]\r\n\r\n\t\t\tif (panel) {\r\n\t\t\t\tconst tabID = tab.id || `tab-${index}`\r\n\t\t\t\tconst panelId = panel.id || `tabpanel-${index}`\r\n\t\t\t\ttab.id = tabID\r\n\t\t\t\tpanel.id = panelId\r\n\t\t\t\ttab.setAttribute('aria-controls', panelId)\r\n\t\t\t\tpanel.setAttribute('role', 'tabpanel')\r\n\t\t\t\tpanel.setAttribute('aria-labelledby', tabID)\r\n\t\t\t\tpanel.hidden = index !== 0\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.tabs.forEach((tab) => {\r\n\t\t\ttab.addEventListener('click', (event) => {\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\tthis.selectTab(tab)\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.updateIndicator(this.tabs[0])\r\n\t}\r\n\r\n\tselectTab(selectedTab) {\r\n\t\tthis.tabs.forEach((tab) => {\r\n\t\t\tconst selected = tab === selectedTab\r\n\t\t\ttab.setAttribute('aria-selected', selected)\r\n\t\t\ttab.tabIndex = selected ? 0 : -1\r\n\t\t})\r\n\r\n\t\tthis.panels.forEach((panel) => {\r\n\t\t\tconst tabID = selectedTab.getAttribute('aria-controls')\r\n\t\t\tpanel.hidden = panel.id !== tabID\r\n\t\t})\r\n\r\n\t\tthis.updateIndicator(selectedTab)\r\n\t}\r\n\r\n\tupdateIndicator(tab) {\r\n\t\tif (!this.indicator || !tab) return\r\n\t\tconst tabRect = tab.getBoundingClientRect()\r\n\t\tconst listRect = this.tabList.getBoundingClientRect()\r\n\t\tthis.indicator.style.width = `${tabRect.width}px`\r\n\t\tthis.indicator.style.left = `${tabRect.left - listRect.left}px`\r\n\t}\r\n}\r\n\r\nfunction toggleButtonState(button, className, duration = 2000) {\r\n\tbutton.classList.add(className)\r\n\r\n\tsetTimeout(() => {\r\n\t\tbutton.classList.remove(className)\r\n\t}, duration)\r\n}\r\n\r\nfunction extractRepoFromUrl(url) {\r\n\tconst match = url.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/)\r\n\treturn match ? `${match[1]}/${match[2]}` : null\r\n}\r\n\r\nasync function fetchLatestReleaseDate(repo) {\r\n\ttry {\r\n\t\tconst response = await fetch(`https://api.github.com/repos/${repo}/releases/latest`)\r\n\t\tif (response.ok) {\r\n\t\t\tconst data = await response.json()\r\n\t\t\treturn data.published_at ? new Date(data.published_at) : null\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error fetching release data:', error)\r\n\t}\r\n\treturn null\r\n}\r\n\r\nasync function updateLibraryStatus(statusCell, releaseDate) {\r\n\tif (!releaseDate) return\r\n\r\n\tconst index = statusCell.dataset.index\r\n\tconst data = new FormData()\r\n\tdata.append('action', 'rtbs_update_library_status')\r\n\tdata.append('_ajax_nonce', RTBS.nonce)\r\n\tdata.append('id', RTBS.id)\r\n\tdata.append('index', index)\r\n\tdata.append('date', releaseDate.toISOString())\r\n\r\n\tconst updateLibraryStatusRequest = await fetch(RTBS.ajaxUrl, {\r\n\t\tmethod: 'POST',\r\n\t\tbody: data\r\n\t})\r\n\r\n\tconst updateLibraryStatusResponse = await updateLibraryStatusRequest.json()\r\n\r\n\tif (updateLibraryStatusResponse.success) {\r\n\t\tstatusCell.innerHTML = updateLibraryStatusResponse.data\r\n\t}\r\n}\r\n\r\nasync function updateLibraryDates() {\r\n\tconst librariesGrid = document.querySelector('.grid--libraries')\r\n\r\n\tif (!librariesGrid) return\r\n\r\n\tconst libraryGitHubRepositoryLinks = librariesGrid.querySelectorAll('a.grid__cell--link[href*=\"github.com\"]')\r\n\r\n\tlibraryGitHubRepositoryLinks.forEach(async (link) => {\r\n\t\tconst repo = extractRepoFromUrl(link.href)\r\n\t\tconst index = link.dataset.index\r\n\r\n\t\tif (!repo) return\r\n\r\n\t\tconst dateCell = librariesGrid.querySelector(`.grid__cell--date[data-index=\"${index}\"]`)\r\n\t\tconst statusCell = librariesGrid.querySelector(`.grid__cell--status[data-index=\"${index}\"]`)\r\n\r\n\t\tif (dateCell && statusCell) {\r\n\t\t\ttry {\r\n\t\t\t\tconst releaseDate = await fetchLatestReleaseDate(repo)\r\n\r\n\t\t\t\tif (releaseDate) {\r\n\t\t\t\t\tdateCell.textContent = releaseDate.toLocaleDateString()\r\n\t\t\t\t\tupdateLibraryStatus(statusCell, releaseDate)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(`Failed to update library date for ${repo}:`, error)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tconst preview = document.getElementById('preview')\r\n\tconst previewExpandButton = document.querySelector('#preview .rtbs-button--expand')\r\n\tconst copyDesignButton = document.querySelector('.rtbs-button--copy')\r\n\tconst shareButton = document.querySelector('.rtbs-button--share')\r\n\tconst codeTabs = document.getElementById('code')\r\n\r\n\tif (preview && previewExpandButton) {\r\n\t\tpreviewExpandButton.addEventListener('click', () => {\r\n\t\t\tpreview.removeAttribute('style')\r\n\t\t\tpreview.classList.toggle('expanded')\r\n\t\t})\r\n\t}\r\n\r\n\tif (copyDesignButton) {\r\n\t\tcopyDesignButton.addEventListener('click', async () => {\r\n\t\t\tconst componentHTML = preview.innerHTML\r\n\t\t\tconst response = await fetch('https://api.to.design/html', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\tAuthorization: 'Bearer ...'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({ html: componentHTML, clip: true })\r\n\t\t\t})\r\n\t\t\tif (response.ok) {\r\n\t\t\t\tconst clipboardDataFromAPI = await response.text()\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait navigator.clipboard.writeText(clipboardDataFromAPI)\r\n\t\t\t\t\ttoggleButtonState(copyDesignButton, 'copy--success')\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Failed to copy to clipboard:', error)\r\n\t\t\t\t\ttoggleButtonState(copyDesignButton, 'copy--error')\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('Failed to fetch clipboard data from API:', response.statusText)\r\n\t\t\t\ttoggleButtonState(copyDesignButton, 'copy--error')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tif (shareButton) {\r\n\t\tshareButton.addEventListener('click', async () => {\r\n\t\t\ttry {\r\n\t\t\t\tawait navigator.share({\r\n\t\t\t\t\ttitle: document.title,\r\n\t\t\t\t\turl: window.location.href\r\n\t\t\t\t})\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Failed to share:', error)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tif (codeTabs) {\r\n\t\tconst codePanels = codeTabs.querySelectorAll('.tabs-panel')\r\n\r\n\t\tcodePanels.forEach(async (panel) => {\r\n\t\t\tconst code = panel.querySelector('code')\r\n\t\t\tif (!code) return\r\n\r\n\t\t\tconst copyButton = panel.querySelector('.copy')\r\n\t\t\tconst codeContainer = panel.querySelector('.code')\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst lang = codeContainer.dataset.lang || 'javascript'\r\n\t\t\t\tconst formattedCode = await codeToHtml(code.textContent, {\r\n\t\t\t\t\tlang,\r\n\t\t\t\t\ttheme: 'dark-plus',\r\n\t\t\t\t\tcolorReplacements: { '#1e1e1e': '#0f172b' }\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (codeContainer) codeContainer.innerHTML = formattedCode\r\n\r\n\t\t\t\tif (copyButton) {\r\n\t\t\t\t\tcopyButton.addEventListener('click', async () => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait navigator.clipboard.writeText(code.textContent)\r\n\t\t\t\t\t\t\ttoggleButtonState(copyButton, 'copy--success')\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.error('Failed to copy:', error)\r\n\t\t\t\t\t\t\ttoggleButtonState(copyButton, 'copy--error')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error processing code panel:', error)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tnew Tabs(codeTabs)\r\n\t}\r\n\r\n\tupdateLibraryDates()\r\n})\r\n"]}