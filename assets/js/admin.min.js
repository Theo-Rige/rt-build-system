document.querySelectorAll("#rtbs_component_libraries .rtbs-library"),document.querySelector("#rtbs_component_libraries .rtbs-library:last-child");function e(e,t){const r=e.querySelector(".rtbs-library-date"),l=e.querySelector('input[name*="[date]"]');if(r.classList.remove("rtbs-library-date--warning","rtbs-library-date--danger"),t){l.value=t.toLocaleDateString();const e=new Date,n=new Date(e),o=new Date(e);n.setMonth(e.getMonth()-6),o.setFullYear(e.getFullYear()-1),t<o?r.classList.add("rtbs-library-date--danger"):t<n&&r.classList.add("rtbs-library-date--warning")}else l.value="";r.classList.remove("rtbs-library-date--loading")}async function t(t,r){const l=function(e){const t=e.match(/github\.com\/([^\/]+)\/([^\/]+)/);return t?`${t[1]}/${t[2]}`:null}(r.value);if(t.querySelector(".rtbs-library-date").classList.add("rtbs-library-date--loading"),l&&r.checkValidity()){const r=await async function(e){try{const t=await fetch(`https://api.github.com/repos/${e}/releases/latest`);if(t.ok){const e=await t.json();return e.published_at?new Date(e.published_at):null}}catch(e){console.error("Error fetching release data:",e)}return null}(l);e(t,r)}else e(t,null)}function r(e,l,n,o,a){const i=e.querySelectorAll("input"),c=e.querySelector('input[name*="[repository]"]');c&&c.addEventListener("blur",()=>{console.log(`Fetching latest release date for repository: ${c.value}`),t(e,c)}),e.addEventListener("input",()=>{if(Array.from(i).every(e=>e.readOnly||e.checkValidity()&&e.value.length>0)){const t=l.querySelectorAll(n);if(t[t.length-1]===e){const e=a.cloneNode(!0),t=function(e,t){return e.querySelectorAll(t).length}(l,n);!function(e,t,r){const l=e.querySelectorAll("input"),n=e.querySelectorAll("label");l.forEach(e=>{if(e.name&&e.name.includes(`${r}[`)){const l=e.name.match(/\[([^\]]+)\]$/)?.[1];l&&(e.name=`${r}[${t}][${l}]`,e.id=`${r}[${t}][${l}]`)}}),n.forEach(e=>{if(e.getAttribute("for")&&e.getAttribute("for").includes(`${r}[`)){const l=e.getAttribute("for").match(/\[([^\]]+)\]$/)?.[1];l&&e.setAttribute("for",`${r}[${t}][${l}]`)}})}(e,t,o),e.querySelectorAll("input").forEach(e=>e.value=""),l.appendChild(e),r(e,l,n,o,a)}}else{const t=l.querySelector(`${n}:last-child`);if(t&&t!==e){Array.from(t.querySelectorAll("input")).every(e=>0===e.value.length)&&t.remove()}}})}function l(e){const{containerSelector:l,itemSelector:n,fieldPrefix:o}=e,a=document.querySelector(`${l} .inside`);if(!a)return;const i=a.querySelectorAll(n),c=a.querySelector(`${n}:last-child`);if(i.forEach(e=>{const r=e.querySelector('input[name*="[repository]"]');r&&t(e,r)}),c){const e=c.cloneNode(!0);r(c,a,n,o,e)}}l({containerSelector:"#rtbs-component-libraries",itemSelector:".rtbs-postbox-item--library",fieldPrefix:"rtbs-libraries"}),l({containerSelector:"#rtbs-component-references",itemSelector:".rtbs-postbox-item--reference",fieldPrefix:"rtbs-references"});
//# sourceMappingURL=admin.min.js.map
